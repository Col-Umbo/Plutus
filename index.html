<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Plutus</title>
    <link rel="stylesheet" href="styles.css" />
    <script defer src="scripts.js"></script>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>
    <!-- =============== Backend Connection =============== -->
    <script>
        // This opens the connection with the Python end
        new QWebChannel(qt.webChannelTransport, function (channel) {
            window.handler = channel.objects.handler;
            // Once this connection is established, you can simply call backend methods.
            handler.send_to_server("hello");
            // Getting return values from methods requires a little extra work. Call function(return_value) as a parameter, as shown below
            handler.int_test(7, function (ret) {
                handler.int_test(ret);
            });
        });
    </script>



    <!-- =============== Topbar (outside of main content) =============== -->
    <header>
        <div class="topbar">
            <!-- Logo -->
            <div class="logoContainer">
                <div class="logo" font-family="Sansation">
                    <h1>Plutus</h1>
                </div>
            </div>

            <div class="spacer"></div>

            <!-- Light Mode Button -->
            <button class="topbarButtons" id="themeToggleBtn" type="button" title="Toggle Theme">
                <b id="themeLabel">Light</b>
            </button>

            <!-- Password Button -->
            <button class="topbarButtons" id="passwordBtn" type="button" title="Enable Password">
                <!-- Insert lock icon here -->
                <b>Lock</b>
            </button>
        </div>
    </header>



    <!-- =============== Main Content =============== -->
    <main>
        <!-- Different pages will be switched via Javascript -->
        <div class="page" id="page">

            <!-- ~~~~~~~~~~ Home Page ~~~~~~~~~~ -->
            <article class="view active" id="view-home" data-title="Home">
                <div class="contentHeader">
                    <h1>Home</h1>
                    <p>Get an summary and overview of your finances.</p>
                </div>

                <div class="grid">
                    <section class="card">
                        <div class="cardTop">
                            <h3>Coming Soon</h3>
                        </div>
                        <p>Financial overview page coming soon</p>
                    </section>
                </div>

                </section>
            </article>

            <!-- ~~~~~~~~~~ Transactions Page ~~~~~~~~~~ -->
            <article class="view" id="view-transactions" data-title="Transactions">
                <div class="contentHeader">
                    <h1>Transactions</h1>
                    <p>Log income and expenses by category.</p>
                </div>

                <div class="grid">

                    <!-- Transaction Totals Card -->
                    <section class="card tx-top-card">
                        <div class="cardTop">
                            <h3>Transaction Totals</h3>
                        </div>

                        <div class="transactionTotals">
                            <div class="totals-card income">
                                <span class="label">Income</span>
                                <span id="incomeTotal" class="value">$0.00</span>
                            </div>

                            <div class="totals-card expense">
                                <span class="label">Expenses</span>
                                <span id="expenseTotal" class="value">$0.00</span>
                            </div>
                        </div>

                        <button id="openAddModal" class="add-btn" aria-label="Add transaction">+</button>
                    </section>

                    <!-- Transaction filters -->
                    <section class="filters">
                        <div class="pill-group" role="tablist" aria-label="Transaction filter">
                            <button class="pill active" data-filter="all">All</button>
                            <button class="pill" data-filter="income">Income</button>
                            <button class="pill" data-filter="expense">Expenses</button>
                        </div>

                        <div class="search">
                            <input id="searchInput" type="search" placeholder="Search transactions" />
                        </div>
                    </section>

                    <section class="card">
                        <div class="list-head">
                            <span class="col date">Date</span>
                            <span class="col name">Name</span>
                            <span class="col category">Category</span>
                            <span class="col amt">Amount</span>
                            <span class="col actions">Actions</span>
                        </div>

                        <ul id="txList" class="tx-list" aria-label="Transaction list"></ul>

                        <div id="emptyState" class="empty">
                            No transactions yet. Click <strong>+</strong> to add one.
                        </div>
                    </section>

                    <!-- Add Transaction Modal-->
                    <div id="modalBackdrop" class="backdrop hidden" aria-hidden="true">
                        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
                            <div class="modal-head">
                                <h2 id="modalTitle">Add Transaction</h2>
                                <button id="closeModal" class="icon-btn" aria-label="Close">âœ•</button>
                            </div>

                            <form id="txForm" class="form">
                                <div class="row">
                                    <label>
                                        Type
                                        <select id="txType" required>
                                            <option value="expense">Expense</option>
                                            <option value="income">Income</option>
                                        </select>
                                    </label>

                                    <label>
                                        Amount
                                        <input id="txAmount" type="number" inputmode="decimal" step="0.01" min="0"
                                            placeholder="0.00" required />
                                    </label>
                                </div>

                                <div class="row">
                                    <label>
                                        Date
                                        <input id="txDate" type="date" required />
                                    </label>

                                    <label>
                                        Category
                                        <select id="txCategory" required></select>
                                    </label>
                                </div>

                                <label>
                                    Transaction name
                                    <input id="txName" type="text" placeholder="e.g., Grocery run" maxlength="60"
                                        required />
                                </label>

                                <div class="row row-inline">
                                    <label class="checkbox">
                                        <input id="txRepeats" type="checkbox" />
                                        Repeats
                                    </label>

                                    <label id="repeatEveryWrap" class="hidden">
                                        Repeat every
                                        <select id="repeatEvery">
                                            <option value="weekly">Weekly</option>
                                            <option value="biweekly">Biweekly</option>
                                            <option value="monthly" selected>Monthly</option>
                                            <option value="yearly">Yearly</option>
                                        </select>
                                    </label>
                                </div>

                                <div class="modal-actions">
                                    <button type="button" id="cancelBtn" class="btn secondary">Cancel</button>
                                    <button type="submit" class="btn primary">Add</button>
                                </div>
                            </form>
                        </div>
                    </div>

                </div>
            </article>

            <!-- ~~~~~~~~~~ Budget Page ~~~~~~~~~~ -->
            <article class="view" id="view-budget" data-title="Budget">
                <div class="contentHeader">
                    <h1>Budget</h1>
                    <p>Set and keep track of your monthly budget</p>
                </div>

                <div class="grid">
                    <section class="card">
                        <div class="cardTop">
                            <h3>Coming Soon</h3>
                        </div>
                        <p>Budget features coming soon</p>
                    </section>
                </div>

            </article>

            <!-- ~~~~~~~~~~ What-If Page ~~~~~~~~~~ -->
            <article class="view" id="view-whatif" data-title="What-If">
                <div class="contentHeader">
                    <h1>What-If</h1>
                    <p>Experiment with what-if scenarios to see how it will affect you current finances.</p>
                </div>

                <div class="grid">
                    <section class="card">
                        <div class="cardTop">
                            <h3>Coming Soon</h3>
                        </div>
                        <p>What-If features coming soon</p>
                    </section>
                </div>
        </div>
        </article>

        <!-- ~~~~~~~~~~ Goals Page ~~~~~~~~~~ -->
        <article class="view" id="view-goals" data-title="Goals">
            <div class="contentHeader">
                <h1>Goals</h1>
                <p>Experiment with what-if scenarios to see how it will affect you current finances.</p>
            </div>

            <div class="grid">
                <section class="card">
                    <div class="cardTop">
                        <h3>Coming Soon</h3>
                    </div>
                    <p>Goals features coming soon</p>
                </section>
            </div>
        </article>

        </div>
    </main>



    <!-- =============== Dock Navigation (outside of main content) =============== -->
    <nav class="dock" aria-label="Dock Navigation">
        <button class="dockBtn active" data-target="home" type="button" aria-current="page">
            <div class="btnTip">Financial Summary Page</div>
            <img class="dockIcon" src="Icons/home_dark-mode.png" data-dark="Icons/home_dark-mode.png"
                data-light="Icons/home_light-mode.png" alt="home icon" />
            <div class="dockLabel">Summary</div>
        </button>

        <button class="dockBtn" data-target="transactions" type="button">
            <div class="btnTip">Log Transactions</div>
            <img class="dockIcon" src="Icons/transactions_dark-mode.png" data-dark="Icons/transactions_dark-mode.png"
                data-light="Icons/transactions_light-mode.png" alt="transactions icon" />
            <div class="dockLabel">Transactions</div>
        </button>

        <button class="dockBtn" data-target="budget" type="button">
            <div class="btnTip">Set Budget</div>
            <img class="dockIcon" src="Icons/budget_dark-mode.png" data-dark="Icons/budget_dark-mode.png"
                data-light="Icons/budget_light-mode.png" alt="transactions icon" />
            <div class="dockLabel">Budget</div>
        </button>

        <button class="dockBtn" data-target="whatif" type="button">
            <div class="btnTip">What-If Scenarios</div>
            <img class="dockIcon" src="Icons/whatif_dark-mode.png" data-dark="Icons/whatif_dark-mode.png"
                data-light="Icons/whatif_light-mode.png" alt="transactions icon" />
            <div class="dockLabel">What-If</div>
        </button>

        <button class="dockBtn" data-target="goals" type="button">
            <div class="btnTip">Set Goals</div>
            <img class="dockIcon" src="Icons/goals_dark-mode.png" data-dark="Icons/goals_dark-mode.png"
                data-light="Icons/goals_light-mode.png" alt="transactions icon" />
            <div class="dockLabel">Goals</div>
        </button>
    </nav>




    <!-- =============== Password Overlay =============== -->
    <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-label="Password palette">
        <div class="palette" role="document">
            <div class="palTop">
                <h3>Enable Password Lock</h3>
            </div>
            <p>Password lock feature coming soon.</p>
        </div>
    </div>



    <!-- =============== Footer =============== -->
    <footer class="footer">
        <small>Plutus v1.0</small>
    </footer>
</body>

</html>